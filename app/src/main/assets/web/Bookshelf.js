var getBookshelf = {
    "data": [
        {
            "allowUpdate": true,
            "bookInfoBean": {
                "author": "可蕊",
                "bookmarkList": [],
                "chapterList": [],
                "chapterUrl": "https://shuapi.jiaston.com/book/31154/",
                "coverUrl": "https://imgapi.jiaston.com/BookFiles/BookImages/doushiyaoqitan.jpg",
                "finalRefreshData": 1556336976966,
                "introduce": "在那里的大楼高耸，那里有如同迷宫般的道路，那里即使在夜晚也亮如白昼，那里居住着各种各样的人类，依靠这个城市生存，自身也成为这个都市运作的动力。可是人类也许不会想到，他们每建造一栋大厦，每铺设一座高架桥，每多亮起一盏彻夜不熄的灯光，就会有多少自然环境因此而被损坏，有多少其它生物失去家园，使它们扬起头来时，再也无法看到熟悉的星空。人们也许永远不会关心它们将何去何从，但是生命是很顽强的，为了生存\n　　",
                "name": "都市妖奇谈",
                "noteUrl": "https://shuapi.jiaston.com/book/31154/",
                "origin": "★小说大全★",
                "tag": "http://sou.jiaston.com"
            },
            "chapterListSize": 99,
            "durChapter": 38,
            "durChapterName": "天涯无归路 二",
            "durChapterPage": 0,
            "finalDate": 1557768544530,
            "finalRefreshData": 1556336976966,
            "group": 0,
            "hasUpdate": false,
            "isLoading": false,
            "lastChapterName": "写在三个故事后面的话",
            "newChapters": 0,
            "noteUrl": "https://shuapi.jiaston.com/book/31154/",
            "serialNumber": 3,
            "tag": "http://sou.jiaston.com",
            "useReplaceRule": true,
            "variable": "{\"bookid\":\"31154\"}"
        },
        {
            "allowUpdate": true,
            "bookInfoBean": {
                "author": "苏梨叶",
                "bookmarkList": [],
                "chapterList": [],
                "chapterUrl": "https://www.9txs.com/book/4764/",
                "coverUrl": "https://img.9txs.com/4764/26340.jpg",
                "finalRefreshData": 1556340081520,
                "introduce": "宛州，方圆十二万拓，山原富庶，水系通达，九州大地上财力的渊薮，华族社会中商人的乐园。以淮安为首的十大名城，历来实行商会自治；唯利是图的人心为金铢银毫插上翅膀，俗世的繁华一飞冲天。星流五千五百年，这是大燮朝立国第二百一十个年头。传说中象征财富的星辰填阖，从未如此时这般明亮。星流五千五百年，欲望昂贵万金，道义轻贱如尘。二十七岁的江子美登上淮安城头，就任宛州商会领袖。俯瞰这个连梦想都有标价的地方，他做出了颠覆传统的决定：设立特职“绣衣使”，持牌执法，监督十城商业秩序。星流五千五百年，每个宛州人都有个黄金颜色的梦。绣衣使是繁忙商路上仅剩的异端——他们不会被任何价格买通。",
                "name": "十三绣衣使",
                "noteUrl": "https://www.9txs.com/book/4764.html",
                "origin": "九桃小说网",
                "tag": "https://www.9txs.com"
            },
            "chapterListSize": 72,
            "durChapter": 0,
            "durChapterName": "第1章 入淮安(1)",
            "durChapterPage": 0,
            "finalDate": 1557739312977,
            "finalRefreshData": 1556340081520,
            "group": 0,
            "hasUpdate": false,
            "isLoading": false,
            "lastChapterName": "第72章 后记·藏剑之人",
            "newChapters": 0,
            "noteUrl": "https://www.9txs.com/book/4764.html",
            "serialNumber": 2,
            "tag": "https://www.9txs.com",
            "useReplaceRule": true
        },
        {
            "allowUpdate": true,
            "bookInfoBean": {
                "author": "沈复_出版",
                "bookmarkList": [],
                "chapterList": [],
                "chapterUrl": "http://api.zhuishushenqi.com/atoc/5ad856d33492fa0100c1fad2\n?view=chapters",
                "coverUrl": "http://statics.zhuishushenqi.com/agent/http%3A%2F%2Fimg.1391.com%2Fapi%2Fv1%2Fbookcenter%2Fcover%2F1%2F2281855%2F2281855_dc9ee42096fb4c1395f62b270f805daa.jpg%2F",
                "finalRefreshData": 1556337051637,
                "introduce": "书籍是人类文明的编年史,是人类历史的载体,是人类理性和智慧的结晶。一个人的阅读史,便是一个人的心灵史和精神成长史。书籍是抚育杰出人才的珍贵乳汁,是支撑伟大心灵的富贵血脉,是铸就高贵灵魂的丰富给养。读书,应该成为一种生活态度、一种存在方式、一种审美情趣、一种精神追求、一种生命寄托、一种人生境界。",
                "name": "浮生六记",
                "noteUrl": "http://api.zhuishushenqi.com/atoc?view=summary&book=5676345024a0382c4895addf",
                "origin": "★My716★",
                "tag": "http://api.zhuishushenqi.com"
            },
            "chapterListSize": 4,
            "durChapter": 3,
            "durChapterName": "卷四 浪游记快",
            "durChapterPage": 0,
            "finalDate": 1557578958998,
            "finalRefreshData": 1556337051637,
            "group": 2,
            "hasUpdate": false,
            "isLoading": false,
            "lastChapterName": "卷四 浪游记快",
            "newChapters": 0,
            "noteUrl": "http://api.zhuishushenqi.com/atoc?view=summary&book=5676345024a0382c4895addf",
            "serialNumber": 8,
            "tag": "http://api.zhuishushenqi.com",
            "useReplaceRule": true
        },
        {
            "allowUpdate": true,
            "bookInfoBean": {
                "author": "辰东",
                "bookSourceType": "",
                "bookmarkList": [],
                "chapterList": [],
                "chapterUrl": "https://druid.if.qidian.com/argus/api/v1/chapterlist/chapterlist?bookId=1004608738",
                "coverUrl": "https://bookcover.yuewen.com/qdbimg/349573/1004608738/180",
                "finalRefreshData": 1557578849370,
                "introduce": "　　在破败中崛起，在寂灭中复苏。\n　　沧海成尘，雷电枯竭，那一缕幽雾又一次临近大地，世间的枷锁被打开了，一个全新的世界就此揭开神秘的一角……",
                "name": "圣墟",
                "noteUrl": "https://book.qidian.com/info/1004608738",
                "origin": "起点中文",
                "tag": "https://www.qidian.com"
            },
            "chapterListSize": 1424,
            "durChapter": 0,
            "durChapterName": "第一章 沙漠中的彼岸花",
            "durChapterPage": 0,
            "finalDate": 1557578954953,
            "finalRefreshData": 1557578849370,
            "group": 0,
            "hasUpdate": false,
            "isLoading": false,
            "lastChapterName": "🔒第1402章 踏帝行",
            "newChapters": 0,
            "noteUrl": "https://book.qidian.com/info/1004608738",
            "serialNumber": 9,
            "tag": "https://www.qidian.com",
            "useReplaceRule": true,
            "variable": "{\"bid\":\"1004608738\"}"
        },
        {
            "allowUpdate": true,
            "bookInfoBean": {
                "author": "亦舒",
                "bookmarkList": [],
                "chapterList": [],
                "chapterUrl": "http://www.ddshu.net/html/17875/opf.html",
                "coverUrl": "http://www.ddshu.net/rscs/default.gif",
                "finalRefreshData": 1556436020433,
                "introduce": "这是一部短篇小说集,收有11篇短篇小说,分别是蓝色都市,淡出,赌场,告密,监护人,旧生会,旧时人,三四零号,小读者,笑脸,寻友.",
                "name": "蓝色都市",
                "noteUrl": "http://www.ddshu.net/html/17875/index.html",
                "origin": "豆豆小说网",
                "tag": "http://www.ddshu.net/search.php"
            },
            "chapterListSize": 11,
            "durChapter": 0,
            "durChapterName": "蓝色都市",
            "durChapterPage": 0,
            "finalDate": 1557410079817,
            "finalRefreshData": 1556436020433,
            "group": 0,
            "hasUpdate": false,
            "isLoading": false,
            "lastChapterName": "寻友",
            "newChapters": 0,
            "noteUrl": "http://www.ddshu.net/html/17875/index.html",
            "serialNumber": 1,
            "tag": "http://www.ddshu.net/search.php",
            "useReplaceRule": true
        },
        {
            "allowUpdate": true,
            "bookInfoBean": {
                "author": "张小娴",
                "bookmarkList": [],
                "chapterList": [],
                "chapterUrl": "http://www.809803.com/gt/zxx/snz/index.htm",
                "finalRefreshData": 1556520806719,
                "introduce": "",
                "name": "是谁拿走了那一双雪靴",
                "noteUrl": "http://www.809803.com/gt/zxx/snz/index.htm",
                "origin": "三秋书阁（实验性）",
                "tag": "http://www.809803.com"
            },
            "chapterListSize": 47,
            "customCoverPath": "/storage/emulated/0/DCIM/Camera/d4359c1254b198aeeaa6eda9f6f8b2da.jpg",
            "durChapter": 0,
            "durChapterName": "爱情小说死亡事件",
            "durChapterPage": 0,
            "finalDate": 1557409861776,
            "finalRefreshData": 1556520806719,
            "group": 0,
            "hasUpdate": false,
            "isLoading": false,
            "lastChapterName": "(4)",
            "newChapters": 0,
            "noteUrl": "http://www.809803.com/gt/zxx/snz/index.htm",
            "serialNumber": 0,
            "tag": "http://www.809803.com",
            "useReplaceRule": true
        },
        {
            "allowUpdate": true,
            "bookInfoBean": {
                "author": "周木楠",
                "bookmarkList": [],
                "chapterList": [],
                "chapterUrl": "http://api.zhuishushenqi.com/atoc/5acb3bf1e36bd0e811d3344e\n?view=chapters",
                "coverUrl": "http://statics.zhuishushenqi.com/agent/http%3A%2F%2Fimg.1391.com%2Fapi%2Fv1%2Fbookcenter%2Fcover%2F1%2F2138449%2F2138449_da6c338ae3cb459daa6854b80e6f4211.jpg%2F",
                "finalRefreshData": 1556336933422,
                "introduce": "一个喜着红衣的热血少年，一个破败酒家的抠门老板，一个江湖豪门的首席弟子，看似毫不相关的三个人在一个雪夜相遇了。怀着各自的目的，他们一同护送着一座黄金打造的棺材去往边境之城毕罗，期间遭遇各方势力的追杀：顶级的杀手组合月姬冥侯，神秘教派的护法白发仙、紫衣侯……令人精悍的杀人术，消失多年的域外魔教，三位少年的前路似乎无比凶险，可他们却对棺材中的一切一无所知。然而当真相慢慢浮现出来的时候，少年们做了一个惊人的决定……",
                "name": "少年歌行",
                "noteUrl": "http://api.zhuishushenqi.com/atoc?view=summary&book=5894b7ee794173012f814a57",
                "origin": "★My716★",
                "tag": "http://api.zhuishushenqi.com"
            },
            "chapterListSize": 470,
            "durChapter": 461,
            "durChapterName": "血染天启 完本感言 关于少年歌行的n个彩蛋",
            "durChapterPage": 0,
            "finalDate": 1556695609976,
            "finalRefreshData": 1556336933422,
            "group": 0,
            "hasUpdate": false,
            "isLoading": false,
            "lastChapterName": "番外篇：道可道 008 一国之师（番外完结）",
            "newChapters": 0,
            "noteUrl": "http://api.zhuishushenqi.com/atoc?view=summary&book=5894b7ee794173012f814a57",
            "serialNumber": 13,
            "tag": "http://api.zhuishushenqi.com",
            "useReplaceRule": true
        },
        {
            "allowUpdate": true,
            "bookInfoBean": {
                "author": "烽火戏诸侯",
                "bookmarkList": [],
                "chapterList": [],
                "chapterUrl": "http://api.zhuishushenqi.com/atoc/57e90e08abbe08143bdc10ab\n?view=chapters",
                "coverUrl": "http://statics.zhuishushenqi.com/agent/http%3A%2F%2Fimg.1391.com%2Fapi%2Fv1%2Fbookcenter%2Fcover%2F1%2F22517%2F22517_20f9748b11c84774a4daf6cc71ff0b74.jpg%2F",
                "finalRefreshData": 1556336950960,
                "introduce": "这个江湖。有武夫自称天下第二一甲子。有剑仙一剑破甲两千六。有胆小的骑牛道士肩扛两道。但一样是这个江湖，可能是江湖儿郎江湖死，才初出茅庐，便淹死在江湖中。可能对一个未入江湖的稚童来说，抱住了一柄刀，便是抱住了整座江湖。而主角，一刀将江湖捅了个透！临了，喊一声：小二，上酒~",
                "name": "雪中悍刀行",
                "noteUrl": "http://api.zhuishushenqi.com/atoc?view=summary&book=50975b961db679b876000029",
                "origin": "★My716★",
                "tag": "http://api.zhuishushenqi.com"
            },
            "chapterListSize": 1000,
            "customCoverPath": "http://pic2.iqiyipic.com/image/20180605/bf/27/bk_100041652_r_601_m11.jpg",
            "durChapter": 997,
            "durChapterName": "第九百九十八章 番外",
            "durChapterPage": 0,
            "finalDate": 1556695584936,
            "finalRefreshData": 1556336950960,
            "group": 0,
            "hasUpdate": false,
            "isLoading": false,
            "lastChapterName": "第一千章 番外",
            "newChapters": 0,
            "noteUrl": "http://api.zhuishushenqi.com/atoc?view=summary&book=50975b961db679b876000029",
            "serialNumber": 12,
            "tag": "http://api.zhuishushenqi.com",
            "useReplaceRule": true
        },
        {
            "allowUpdate": true,
            "bookInfoBean": {
                "author": "英奥尔德斯·赫胥黎",
                "bookmarkList": [],
                "chapterList": [],
                "chapterUrl": "https://www.9txs.com/book/103711/",
                "coverUrl": "https://img.9txs.com/103711/43287.jpg",
                "finalRefreshData": 1556695481203,
                "introduce": "这是一部寓言作品，展现了赫胥黎眼中的人类社会的未来图景：通过有效的科学和心理工程，人类从遗传和基因上就已经被先天设计为各种等级的社会成员，完全沦为驯顺的机器，个性和自由被扼杀，文学艺术濒于毁灭。继《美丽新世界》这部寓言小说杰作之后，赫胥黎又于一九五八年出版了论着《重返美丽新世界》，在这部雄辩的作品中，作者运用其丰富的社会学和人类学知识，比较了现代社会与他在《美丽新世界》中所构想的寓言性图景的方方面面，像人口过剩、宣传和洗脑以及化学劝诱等，认为他早年悲观的预言正在成为现实。本书将赫胥黎这两部最经典的名着全部收入。",
                "name": "美丽新世界",
                "noteUrl": "https://www.9txs.com/book/103711.html",
                "origin": "九桃小说网",
                "tag": "https://m.9txs.com"
            },
            "chapterListSize": 33,
            "durChapter": 0,
            "durChapterName": "第1章 译本序",
            "durChapterPage": 0,
            "finalDate": 1556695565686,
            "finalRefreshData": 1556695481203,
            "group": 0,
            "hasUpdate": false,
            "isLoading": false,
            "lastChapterName": "第33章 我们能够做些什么？",
            "newChapters": 0,
            "noteUrl": "https://www.9txs.com/book/103711.html",
            "serialNumber": 5,
            "tag": "https://m.9txs.com",
            "useReplaceRule": true
        },
        {
            "allowUpdate": true,
            "bookInfoBean": {
                "author": "九品一局",
                "bookmarkList": [],
                "chapterList": [],
                "chapterUrl": "https://www.9txs.com/book/64229/",
                "coverUrl": "https://img.9txs.com/64229/977.jpg",
                "finalRefreshData": 1556356448752,
                "introduce": "我刚出生的时候，喝了几天狼奶，我把这头狼当妈，我以为我一辈子见不到她，直到有一个女人过来找我……",
                "name": "算死命",
                "noteUrl": "https://www.9txs.com/book/64229.html",
                "origin": "九桃小说网",
                "tag": "https://www.9txs.com"
            },
            "chapterListSize": 1117,
            "durChapter": 0,
            "durChapterName": "第1章 母狼",
            "durChapterPage": 0,
            "finalDate": 1556356467329,
            "finalRefreshData": 1556356448752,
            "group": 0,
            "hasUpdate": false,
            "isLoading": false,
            "lastChapterName": "第1117章 大结局（下）",
            "newChapters": 0,
            "noteUrl": "https://www.9txs.com/book/64229.html",
            "serialNumber": 10,
            "tag": "https://www.9txs.com",
            "useReplaceRule": true
        },
        {
            "allowUpdate": true,
            "bookInfoBean": {
                "author": "(英)乔治·奥威尔等",
                "bookmarkList": [],
                "chapterList": [],
                "chapterUrl": "https://www.hongxiu.com/book/10216830404064001",
                "coverUrl": "https://bookcover.yuewen.com/qdbimg/349573/c_10216830404064001/150",
                "finalRefreshData": 1556337335607,
                "introduce": "阅读世界名家中短篇小说丛书，用宝贵的时间阅读有价值的作品，在文字中体味文学世界里的人生百态，做有深度、有广度、有品位的阅读者。本书收录有《动物庄园》《魔障》《马里奥和魔术师》三篇小说。",
                "name": "动物庄园",
                "noteUrl": "https://www.hongxiu.com/book/10216830404064001",
                "origin": "红袖添香",
                "tag": "https://www.hongxiu.com"
            },
            "chapterListSize": 24,
            "durChapter": 0,
            "durChapterName": "第1章 动物庄园(1)",
            "durChapterPage": 0,
            "finalDate": 1556340071135,
            "finalRefreshData": 1556337335607,
            "group": 0,
            "hasUpdate": false,
            "isLoading": false,
            "lastChapterName": "第24章 马里奥和魔术师(7)",
            "newChapters": 0,
            "noteUrl": "https://www.hongxiu.com/book/10216830404064001",
            "serialNumber": 6,
            "tag": "https://www.hongxiu.com",
            "useReplaceRule": true
        },
        {
            "allowUpdate": true,
            "bookInfoBean": {
                "author": "知乎",
                "bookmarkList": [],
                "chapterList": [],
                "chapterUrl": "https://daily.zhihu.com/#",
                "coverUrl": "https://daily.zhihu.com/img/new_home_v3/phone_sample.png",
                "finalRefreshData": 1554974249692,
                "introduce": "知乎日报 - 每天 3 次，每次 7 分钟\n在中国，资讯类移动应用的人均阅读时长是 5 分钟，而在知乎日报，这个数字是 21。",
                "name": "知乎日报",
                "noteUrl": "https://daily.zhihu.com/#",
                "origin": "知乎日报",
                "tag": "https://daily.zhihu.com"
            },
            "chapterListSize": 30,
            "durChapter": 0,
            "durChapterName": "CBA 的地板为何看起来那么 low？",
            "durChapterPage": 1,
            "finalDate": 1556338153773,
            "finalRefreshData": 1554974249692,
            "group": 0,
            "hasUpdate": false,
            "isLoading": false,
            "lastChapterName": "「以前的女人生四五个娃都没什么事」？来，我们摆摆事实",
            "newChapters": 0,
            "noteUrl": "https://daily.zhihu.com/#",
            "serialNumber": 4,
            "tag": "https://daily.zhihu.com",
            "useReplaceRule": true
        },
        {
            "allowUpdate": true,
            "bookInfoBean": {
                "author": "猫腻",
                "bookmarkList": [],
                "chapterList": [],
                "chapterUrl": "https://www.zhuishushenqi.com/book/53855a750ac0b3a41e00c7e6",
                "coverUrl": "http://statics.zhuishushenqi.com/agent/http%3A%2F%2Fimg.1391.com%2Fapi%2Fv1%2Fbookcenter%2Fcover%2F1%2F42207%2F42207_841c3d595efe40a79cad7bda8cc83d47.jpg%2F",
                "finalRefreshData": 1549379110264,
                "introduce": "太始元年，有神石自太空飞来，分散落在人间，其中落在东土大陆的神石，上面镌刻着奇怪的图腾，人因观其图腾而悟道，后立国教。 数千年后，十四岁的少年孤儿陈长生，为治病改命离开自己的师父，带着一纸婚约来到神都，从而开启了一个逆天强者的崛起征程。",
                "name": "择天记",
                "noteUrl": "https://www.zhuishushenqi.com/book/53855a750ac0b3a41e00c7e6",
                "origin": "#追书神器💯~zhuishushenqi.com",
                "tag": "http://www.zhuishushenqi.com"
            },
            "chapterListSize": 1183,
            "durChapter": 0,
            "durChapterName": "第1章 序 下山",
            "durChapterPage": 0,
            "finalDate": 1556337512347,
            "finalRefreshData": 1549379110264,
            "group": 0,
            "hasUpdate": false,
            "isLoading": false,
            "lastChapterName": "第1183章 神隐之路",
            "newChapters": 0,
            "noteUrl": "https://www.zhuishushenqi.com/book/53855a750ac0b3a41e00c7e6",
            "serialNumber": 14,
            "tag": "http://www.zhuishushenqi.com",
            "useReplaceRule": true
        },
        {
            "allowUpdate": true,
            "bookInfoBean": {
                "author": "君不贱",
                "bookmarkList": [],
                "chapterList": [],
                "chapterUrl": "http://www.biquge.cm/3/3142/",
                "coverUrl": "http://www.biquge.cm/files/article/image/3/3142/3142s.jpg",
                "finalRefreshData": 1554055568583,
                "introduce": "术者，道之用也。 道家五术山、医、命、相、卜，常用来济世渡人，以成就三千功行，从我生下来似乎就注定和道家有缘，机缘巧合下我参悟道法天机，从此我走上了一条不为人知的光怪陆离的道路，也开启一段惊险、神秘而又匪夷所思的人生之旅。 五指掐算天下苍生，一卦谋定万代江山。 我当方士那些年，讲述我的传奇经历，为大家揭开一个神秘莫测的道法世 各位书友要是觉得《我当方士那些年》还不错的话请不要忘记向您QQ群和微博里的朋友推荐哦！",
                "name": "我当方士那些年",
                "noteUrl": "http://www.biquge.cm/3/3142/",
                "origin": "笔趣阁①",
                "tag": "http://www.biquge.cm"
            },
            "chapterListSize": 526,
            "durChapter": 0,
            "durChapterName": "第一章 弃子",
            "durChapterPage": 0,
            "finalDate": 1556337510665,
            "finalRefreshData": 1554055568583,
            "group": 0,
            "hasUpdate": false,
            "isLoading": false,
            "lastChapterName": "第512章 :最终章梦里是谁",
            "newChapters": 0,
            "noteUrl": "http://www.biquge.cm/3/3142/",
            "serialNumber": 15,
            "tag": "http://www.biquge.cm",
            "useReplaceRule": true
        },
        {
            "allowUpdate": true,
            "bookInfoBean": {
                "author": "(英)乔治·奥威尔",
                "bookmarkList": [],
                "chapterList": [],
                "chapterUrl": "https://www.hongxiu.com/book/3757924104617401",
                "coverUrl": "https://bookcover.yuewen.com/qdbimg/349573/c_3757924104617401/150",
                "finalRefreshData": 1556337397564,
                "introduce": "这是一个战后虚拟的世界，全球分割为3个性质雷同、相互攻伐的极权帝国——大洋国、欧亚国与东亚国。英国伦敦成为大洋国一个行省的首府，成为巨大专制机器中的一部分。人们极度崇拜大洋国首领“老大哥”，孩子自发组成小队，监视告发自己的父母；有异端思想的人随时会悄无声息地失踪；物资极度匮乏，但高级党员的享用却不受限制；已刊发的报道随时会被修改；性欲被严厉压制，因为性和爱是不受意识形态控制的；国家以对领袖的个人崇拜和对国内外敌人的仇恨维持社会的运转；思想警察神出鬼没，你永远不知道街角擦肩而过的陌生人是否就是密探；更要命的是，在你卧室、客厅、路上、电梯……任何地方，都悬挂着监视的铁幕。",
                "name": "1984",
                "noteUrl": "https://www.hongxiu.com/book/3757924104617401",
                "origin": "红袖添香",
                "tag": "https://www.hongxiu.com"
            },
            "chapterListSize": 62,
            "durChapter": 0,
            "durChapterName": "第1章 真理部的真理",
            "durChapterPage": 0,
            "finalDate": 1556337396566,
            "finalRefreshData": 1556337397564,
            "group": 0,
            "hasUpdate": true,
            "isLoading": false,
            "lastChapterName": "第62章 新话的原则章(2)",
            "newChapters": 0,
            "noteUrl": "https://www.hongxiu.com/book/3757924104617401",
            "serialNumber": 7,
            "tag": "https://www.hongxiu.com",
            "useReplaceRule": true
        },
        {
            "allowUpdate": true,
            "bookInfoBean": {
                "author": "忘语",
                "bookmarkList": [],
                "chapterList": [],
                "chapterUrl": "https://www.hongxiu.com/book/22305390000123802",
                "coverUrl": "https://bookcover.yuewen.com/qdbimg/349573/c_22305390000123802/150",
                "finalRefreshData": 1556337011744,
                "introduce": "　　一个普通山村小子，偶然下进入到当地江湖小门派，成了一名记名弟子。他以这样身份，如何在门派中立足,如何以平庸的资质进入到修仙者的行列，从而笑傲三界之中！ 　　续篇《凡人修仙之仙界篇》已经在起点中文网上传了，欢迎大家继续支持哦！ 凡人修仙，风云再起 时空穿梭，轮回逆转 金仙太乙，大罗道祖 三千大道，法则至尊 《凡人修仙传》仙界篇，一个韩立叱咤仙界的故事，一个凡人小子修仙的不灭传说。",
                "name": "凡人修仙传",
                "noteUrl": "https://www.hongxiu.com/book/22305390000123802",
                "origin": "红袖添香",
                "tag": "https://www.hongxiu.com"
            },
            "chapterListSize": 2599,
            "durChapter": 45,
            "durChapterName": "第一章 山边小村",
            "durChapterPage": 0,
            "finalDate": 1556337007221,
            "finalRefreshData": 1556337011744,
            "group": 0,
            "hasUpdate": true,
            "isLoading": false,
            "lastChapterName": "忘语新书《玄界之门》",
            "newChapters": 0,
            "noteUrl": "https://www.hongxiu.com/book/22305390000123802",
            "serialNumber": 11,
            "tag": "https://www.hongxiu.com",
            "useReplaceRule": true
        }
    ],
    "errorCode": 0,
    "errorMsg": "",
    "isSuccess": true
};

var $ = document.querySelector.bind(document)
    , $$ = document.querySelectorAll.bind(document)
    , $c = document.createElement.bind(document)
    , randomImg = "http://acg.bakayun.cn/randbg.php?t=dfzh"
    , randomImg2 = "http://img.xjh.me/random_img.php"
    , books
    ;

var apiMap = {
    getBookshelf: "/getBookshelf",
    getChapterList: "/getChapterList",
    getBookContent: "/getBookContent",
    saveBook: "/saveBook"
};

var formatTime = value => {
    return new Date(value).toLocaleString('zh-CN', {
        hour12: false, year: "numeric", month: "2-digit", day: "2-digit", hour: "2-digit", minute: "2-digit", second: "2-digit"
    }).replace(/\//g, "-");
};

var apiAddress = (apiName, url) => {
    let address = $('#address').value || window.location.host;
    if (!(address.startsWith("http") || address.startsWith("//"))) {
        address = "//" + address;
    }
    if (!address.endsWith(":1122")) {
        address += ":1122";
    }
    return address + apiMap[apiName] + (url ? "?url=" + url : "");
};

$('#address').setAttribute("placeholder", "阅读APP地址或IP，默认为" + window.location.host);

fetch(apiAddress("getBookshelf"), {
    mode: "cors"
})
    .then(res => res.json())
    .then(data => {
        if (!data.isSuccess) {
            alert(getBookshelf.errorMsg);
            return;
        }
        books = data.data.sort((book1, book2) => book1.serialNumber - book2.serialNumber);
        books.forEach(book => {
            let bookDiv = $c("div");
            let img = $c("img");
            img.src = book.bookInfoBean.coverUrl || randomImg;
            img.setAttribute("data-series-num", book.serialNumber);
            bookDiv.appendChild(img);
            bookDiv.innerHTML += `<table><tbody>
                                <tr><td>书名：</td><td>${book.bookInfoBean.name}</td></tr>
                                <tr><td>作者：</td><td>${book.bookInfoBean.author}</td></tr>
                                <tr><td>阅读：</td><td>${book.durChapterName}<br>${formatTime(book.finalDate)}</td></tr>
                                <tr><td>更新：</td><td>${book.lastChapterName}<br>${formatTime(book.finalRefreshData)}</td></tr>
                                <tr><td>来源：</td><td>${book.bookInfoBean.origin}</td></tr>
                                </tbody></table>`;
            $('#books').appendChild(bookDiv);
        });
        $$('#books img').forEach(bookImg =>
            bookImg.addEventListener("click", () => {
                $('#all_content').classList.add("read");
                //$("#book_info").html += 
                var book = books[bookImg.getAttribute("data-series-num")];
                $("#info").innerHTML = `<div><p>来源：${book.bookInfoBean.origin}</p>
                                        <p>书名：${book.bookInfoBean.author}</p>
                                        <p>作者：${book.bookInfoBean.author}</p>
                                        <p>阅读章节：${book.durChapterName}</p>
                                        <p>阅读时间：${formatTime(book.finalDate)}</p>
                                        <p>最新章节：${book.lastChapterName}</p>
                                        <p>检查时间：${formatTime(book.finalRefreshData)}</p>
                                        <p>简介：${book.bookInfoBean.introduce.replace(/\n/g, "<br>")}</p></div>`;
                let img = $c("img");
                img.src = bookImg.src;
                $("#info").appendChild(img);
                window.location.hash = "";
                window.location.hash = "#info";
                $("#prechapter").innerHTML = "章节加载中";
                fetch(apiAddress("getChapterList", book.noteUrl), {
                    mode: "cors"
                })
                    .then(res => res.json())
                    .then(data => {
                        if (!data.isSuccess) {
                            alert(data.errorMsg);
                            return;
                        }
                        $("#chapter").innerHTML = "";
                        data.data.forEach(chapter => {
                            let ch = $c("button");
                            ch.setAttribute("data-url", chapter.durChapterUrl);
                            ch.setAttribute("data-name", chapter.durChapterName);
                            ch.innerHTML = chapter.durChapterName.length > 16 ? chapter.durChapterName.substring(0, 14) + "..." : chapter.durChapterName;
                            $("#chapter").appendChild(ch);
                        });
                        $('#chapter').scrollTop = 0;
                        $("#prechapter").innerHTML = "章节加载完成";
                        setTimeout(() => {
                            $("#prechapter").innerHTML = "　";
                        }, 500);
                    });

            }));
        $("#back").addEventListener("click", () => {
            $('#all_content').classList.remove("read");
        });
    });

$('#chapter').addEventListener("click", (e) => {
    if (e.target.tagName === "BUTTON") {
        var url = e.target.getAttribute("data-url");
        var name = e.target.getAttribute("data-name");
        if (!url) {
            alert("未取得章节地址");
        }
        $("#content").innerHTML = "<p>" + name + " 加载中</p>";
        fetch(apiAddress("getBookContent", url), {
            mode: "cors"
        })
            .then(res => res.json())
            .then(data => {
                if (!data.isSuccess) {
                    alert(data.errorMsg);
                    return;
                }
                $("#content").innerHTML = "<h2>" + (name || e.target.innerHTML) + "<h2>";
                $("#content").innerHTML += "　　" + data.data.trim().replace(/\n/g, "<br><br>");
                window.location.hash = "";
                window.location.hash = "#content";
            });
    }

});





